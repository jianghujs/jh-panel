# 规范：PVE定时任务管理

本规范定义了PVE定时任务管理脚本的行为。

## ADDED Requirements

### Requirement: 用户可以查看计划任务列表。

脚本 MUST 显示由该脚本管理的所有定时任务。每个条目都应清晰可辨。

#### 场景：列出任务
- **假如** 存在由该脚本创建的现有定时任务。
- **当** 用户选择列出计划任务时。
- **那么** 脚本会显示一个带编号的任务列表，其中包含cron表达式和命令。

### Requirement: 用户可以添加新的计划任务。

脚本 MUST 提供添加新定时任务的方法。

#### 场景：添加硬件报告任务
- **假如** 用户在“添加任务”菜单中。
- **当** 用户输入有效的cron表达式（例如，“0 0 * * *”）。
- **并且** 用户选择“发送硬件报告”任务。
- **那么** 系统crontab中会添加一个新的定时任务，用于执行硬件报告脚本。

#### 场景：添加自定义脚本任务
- **假如** 用户在“添加任务”菜单中。
- **当** 用户输入���效的cron表达式时。
- **并且** 用户选择“自定义脚本”任务。
- **并且** 用户提供了可执行脚本的有效路径。
- **那么** 系统crontab中会添加一个新的定时任务，用于执行指定的脚本。

### Requirement: 用户可以编辑现有的计划任务。

脚本 MUST 允许修改由该脚本创建的现有定时任务。

#### 场景：编辑任务
- **假如** 用户正在查看计划任务列表。
- **当** 用户选择要编辑的任务时。
- **并且** 提供了新的cron表达式和/或新的任务命令。
- **那么** crontab中相应的定时任务将被更新。

### Requirement: 用户可以删除计划任务。

脚本 MUST 允许删除由该脚本创建的现有定时任务。

#### 场景：删除任务
- **假如** 用户正在查看计划任务列表。
- **当** 用户选择要删除的任务时。
- **并且** 确认删除。
- **那么** 相应的定时任务将从crontab中删除。
